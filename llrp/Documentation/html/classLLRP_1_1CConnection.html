<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>LTKCPP-- LLRP Toolkit C Plus Plus Library: LLRP::CConnection Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>LLRP::CConnection Class Reference<br>
<small>
[<a class="el" href="group__LTKCoreElement.html">Core LTK Library classes and functions</a>]</small>
</h1><a class="el" href="namespaceLLRP.html">LLRP</a> connection class.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="ltkcpp__connection_8h-source.html">ltkcpp_connection.h</a>&gt;</code>
<p>
<a href="classLLRP_1_1CConnection-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a0">CConnection</a> (const <a class="el" href="classLLRP_1_1CTypeRegistry.html">CTypeRegistry</a> *pTypeRegistry, unsigned int nBufferSize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct a new <a class="el" href="namespaceLLRP.html">LLRP</a> connection instance.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a1" doxytag="LLRP::CConnection::~CConnection"></a>
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a1">~CConnection</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destruct a <a class="el" href="namespaceLLRP.html">LLRP</a> connection instance. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a2">openConnectionToReader</a> (const char *pReaderHostName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open the connection to the reader.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a3">getConnectError</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the string that explains openReaderConnection() error.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a4">closeConnectionToReader</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close connection to reader, allow reuse of instance.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classLLRP_1_1CMessage.html">CMessage</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a5">transact</a> (<a class="el" href="classLLRP_1_1CMessage.html">CMessage</a> *pSendMessage, int nMaxMS)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Transact a <a class="el" href="namespaceLLRP.html">LLRP</a> request and response to a connection.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classLLRP_1_1CErrorDetails.html">CErrorDetails</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a6">getTransactError</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the details that explains <a class="el" href="classLLRP_1_1CConnection.html#a5">transact()</a> error.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespaceLLRP.html#a333">EResultCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a7">sendMessage</a> (<a class="el" href="classLLRP_1_1CMessage.html">CMessage</a> *pMessage)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a <a class="el" href="namespaceLLRP.html">LLRP</a> message to a connection.  <a href="#a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classLLRP_1_1CErrorDetails.html">CErrorDetails</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a8">getSendError</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the details that explains <a class="el" href="classLLRP_1_1CConnection.html#a7">sendMessage()</a> error.  <a href="#a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classLLRP_1_1CMessage.html">CMessage</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a9">recvMessage</a> (int nMaxMS)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Receive a message from a connection.  <a href="#a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classLLRP_1_1CMessage.html">CMessage</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a10">recvResponse</a> (int nMaxMS, const <a class="el" href="classLLRP_1_1CTypeDescriptor.html">CTypeDescriptor</a> *pResponseType, llrp_u32_t ResponseMessageID)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Receive a specific message from a connection.  <a href="#a10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classLLRP_1_1CErrorDetails.html">CErrorDetails</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLLRP_1_1CConnection.html#a11">getRecvError</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the details that explains <a class="el" href="classLLRP_1_1CConnection.html#a9">recvMessage()</a> or <a class="el" href="classLLRP_1_1CConnection.html#a10">recvResponse()</a> error.  <a href="#a11"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="namespaceLLRP.html">LLRP</a> connection class. 
<p>
An <a class="el" href="namespaceLLRP.html">LLRP</a> connection consists of:<ul>
<li>A network socket</li><li>An input queue of messages already received. Used to hold asynchronous messages while awaiting a response.</li><li>Receiver state.<ul>
<li>The receive buffer and count</li><li>Whether a frame is valid. Valid means that the receive buffer holds a frame and the MessageLength, MessageType, ProtocolVersion, and MessageID are valid (usable). Not valid with a nBuffer greater than 0 means that a frame is being received. Sometimes we want to look at the frame after it has been (or attempted to be) decoded.</li><li>Top-level frame variables: CFrameExtract</li><li>Details of the last receiver error, including I/O errors, end-of-file (EOF), timeout, or decode errors.</li></ul>
</li><li>Send state<ul>
<li>The send buffer and count</li><li>Details of the last send error, including I/O errors, or encode errors. </li></ul>
</li></ul>

<p>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8h-source.html#l00081">81</a> of file <a class="el" href="ltkcpp__connection_8h-source.html">ltkcpp_connection.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="LLRP::CConnection::CConnection"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">LLRP::CConnection::CConnection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classLLRP_1_1CTypeRegistry.html">CTypeRegistry</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pTypeRegistry</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>nBufferSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Construct a new <a class="el" href="namespaceLLRP.html">LLRP</a> connection instance. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pTypeRegistry</em>&nbsp;</td><td>The <a class="el" href="namespaceLLRP.html">LLRP</a> registry of known message/parameter types. Includes standard and custom. Used during decode. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>nBufferSize</em>&nbsp;</td><td>Size of each the receive and send buffers. Use size larger than the largest frame you expect. 0 selects a default value.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>!=NULL Pointer to connection instance ==NULL Error, always an allocation failure most likely nBufferSize is weird </dd></dl>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8cpp-source.html#l00138">138</a> of file <a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a4" doxytag="LLRP::CConnection::closeConnectionToReader"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int LLRP::CConnection::closeConnectionToReader           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Close connection to reader, allow reuse of instance. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>==0 Connected OK, ready for business !=0 Error, check <a class="el" href="classLLRP_1_1CConnection.html#a3">getConnectError()</a> for reason </dd></dl>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8cpp-source.html#l00405">405</a> of file <a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a>.
<p>
Referenced by <a class="el" href="ltkcpp__connection_8cpp-source.html#l00206">~CConnection()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="LLRP::CConnection::getConnectError"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char * LLRP::CConnection::getConnectError           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the string that explains openReaderConnection() error. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>==NULL No error !=NULL Short string description of error </dd></dl>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8cpp-source.html#l00388">388</a> of file <a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="LLRP::CConnection::getRecvError"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="classLLRP_1_1CErrorDetails.html">CErrorDetails</a> * LLRP::CConnection::getRecvError           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the details that explains <a class="el" href="classLLRP_1_1CConnection.html#a9">recvMessage()</a> or <a class="el" href="classLLRP_1_1CConnection.html#a10">recvResponse()</a> error. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>Pointer to const error details </dd></dl>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8cpp-source.html#l00719">719</a> of file <a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a>.
<p>
Referenced by <a class="el" href="ltkcpp__connection_8cpp-source.html#l00515">getTransactError()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="LLRP::CConnection::getSendError"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="classLLRP_1_1CErrorDetails.html">CErrorDetails</a> * LLRP::CConnection::getSendError           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the details that explains <a class="el" href="classLLRP_1_1CConnection.html#a7">sendMessage()</a> error. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>Pointer to const error details </dd></dl>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8cpp-source.html#l00634">634</a> of file <a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a>.
<p>
Referenced by <a class="el" href="ltkcpp__connection_8cpp-source.html#l00515">getTransactError()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="LLRP::CConnection::getTransactError"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="classLLRP_1_1CErrorDetails.html">CErrorDetails</a> * LLRP::CConnection::getTransactError           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the details that explains <a class="el" href="classLLRP_1_1CConnection.html#a5">transact()</a> error. 
<p>
This is not 100% reliable. It looks at the send error and if that seems OK it uses the recv error. Uses of <a class="el" href="classLLRP_1_1CConnection.html#a7">sendMessage()</a>, <a class="el" href="classLLRP_1_1CConnection.html#a9">recvMessage()</a> or <a class="el" href="classLLRP_1_1CConnection.html#a10">recvResponse()</a> since <a class="el" href="classLLRP_1_1CConnection.html#a5">transact()</a> will distort the error.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Pointer to const error details </dd></dl>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8cpp-source.html#l00515">515</a> of file <a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a>.
<p>
References <a class="el" href="ltkcpp__connection_8cpp-source.html#l00719">getRecvError()</a>, <a class="el" href="ltkcpp__connection_8cpp-source.html#l00634">getSendError()</a>, <a class="el" href="ltkcpp__base_8h-source.html#l00653">LLRP::CErrorDetails::m_eResultCode</a>, and <a class="el" href="namespaceLLRP.html#a333a251">LLRP::RC_OK</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="LLRP::CConnection::openConnectionToReader"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int LLRP::CConnection::openConnectionToReader           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pReaderHostName</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Open the connection to the reader. 
<p>
The steps:<ul>
<li>Look up the host name</li><li>Create a socket</li><li>Connect to the host address</li><li>Condition the socket (set options)</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pReaderHostName</em>&nbsp;</td><td>String containing the reader host name</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>==0 Connected OK, ready for business !=0 Error, check <a class="el" href="classLLRP_1_1CConnection.html#a3">getConnectError()</a> for reason </dd></dl>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8cpp-source.html#l00261">261</a> of file <a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="LLRP::CConnection::recvMessage"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classLLRP_1_1CMessage.html">CMessage</a> * LLRP::CConnection::recvMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>nMaxMS</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Receive a message from a connection. 
<p>
The message could have already arrived and be pending on the input queue.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>nMaxMS</em>&nbsp;</td><td>-1 =&gt; block indefinitely 0 =&gt; just peek at input queue and socket queue, return immediately no matter what &gt;0 =&gt; ms to await complete frame</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>==NULL No message available per parameters. Check <a class="el" href="classLLRP_1_1CConnection.html#a11">getRecvError()</a> for why !=NULL Input message </dd></dl>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8cpp-source.html#l00661">661</a> of file <a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a>.
<p>
References <a class="el" href="ltkcpp__base_8h-source.html#l00601">LLRP::EResultCode</a>, <a class="el" href="namespaceLLRP.html#a333a252">LLRP::RC_MiscError</a>, and <a class="el" href="ltkcpp__error_8cpp-source.html#l00067">LLRP::CErrorDetails::resultCodeAndWhatStr()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="LLRP::CConnection::recvResponse"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classLLRP_1_1CMessage.html">CMessage</a> * LLRP::CConnection::recvResponse           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>nMaxMS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classLLRP_1_1CTypeDescriptor.html">CTypeDescriptor</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pResponseType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>llrp_u32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>ResponseMessageID</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Receive a specific message from a connection. 
<p>
The message is identified by type and message ID.<p>
This is used to receive a response to a request, but could be used for other things, too. A message matches and is returned if the type matches AND if the message ID matches. Either or both can be wildcards.<p>
The sought message could have already arrived and be pending on the input queue. While we are looking for the response notifications might arrive. They are held in the input queue while we continue to look for the sought message.<p>
About timeLimit.... The timeLimit is the last time() we'll try to receive the sought message and prevents "spinning". It is conceivable that a steady stream of messages other than the one sought could arrive, and the time between those messages could be smaller the nMaxMS. When that happens, recvAdvance() would not time out during its poll/select. It could "spin". The time out must be detected by other means and that's the purpose of timeLimit.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>nMaxMS</em>&nbsp;</td><td>-1 =&gt; block indefinitely 0 =&gt; just peek at input queue and socket queue, return immediately no matter what &gt;0 =&gt; ms to await complete frame </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pResponseType</em>&nbsp;</td><td>The type descriptor of the sought or NULL to match all messages. If not NULL, ERROR_MESSAGE will also match. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ResponseMessageID</em>&nbsp;</td><td>The MessageID of sought message or 0 to match all messages.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>==NULL No message available per parameters. Check <a class="el" href="classLLRP_1_1CConnection.html#a11">getRecvError()</a> for why !=NULL Input message </dd></dl>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8cpp-source.html#l00772">772</a> of file <a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a>.
<p>
References <a class="el" href="ltkcpp__base_8h-source.html#l00601">LLRP::EResultCode</a>, <a class="el" href="ltkcpp__base_8h-source.html#l01124">LLRP::CMessage::getMessageID()</a>, <a class="el" href="ltkcpp__typeregistry_8cpp-source.html#l00086">LLRP::CTypeRegistry::lookupMessage()</a>, <a class="el" href="ltkcpp__base_8h-source.html#l00989">LLRP::CElement::m_pType</a>, <a class="el" href="namespaceLLRP.html#a333a252">LLRP::RC_MiscError</a>, and <a class="el" href="ltkcpp__error_8cpp-source.html#l00067">LLRP::CErrorDetails::resultCodeAndWhatStr()</a>.
<p>
Referenced by <a class="el" href="ltkcpp__connection_8cpp-source.html#l00452">transact()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="LLRP::CConnection::sendMessage"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="namespaceLLRP.html#a333">EResultCode</a> LLRP::CConnection::sendMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classLLRP_1_1CMessage.html">CMessage</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pMessage</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send a <a class="el" href="namespaceLLRP.html">LLRP</a> message to a connection. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pMessage</em>&nbsp;</td><td>Pointer to the <a class="el" href="namespaceLLRP.html">LLRP</a> message to send.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>RC_OK Frame sent RC_SendIOError I/O error in write(). Probably means fd is bad. RC_... Encoder error. Check <a class="el" href="classLLRP_1_1CConnection.html#a8">getSendError()</a> for why. </dd></dl>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8cpp-source.html#l00545">545</a> of file <a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a>.
<p>
References <a class="el" href="ltkcpp__error_8cpp-source.html#l00035">LLRP::CErrorDetails::clear()</a>, <a class="el" href="ltkcpp__base_8h-source.html#l00653">LLRP::CErrorDetails::m_eResultCode</a>, <a class="el" href="namespaceLLRP.html#a333a252">LLRP::RC_MiscError</a>, <a class="el" href="namespaceLLRP.html#a333a251">LLRP::RC_OK</a>, <a class="el" href="namespaceLLRP.html#a333a254">LLRP::RC_SendIOError</a>, and <a class="el" href="ltkcpp__error_8cpp-source.html#l00067">LLRP::CErrorDetails::resultCodeAndWhatStr()</a>.
<p>
Referenced by <a class="el" href="ltkcpp__connection_8cpp-source.html#l00452">transact()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="LLRP::CConnection::transact"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classLLRP_1_1CMessage.html">CMessage</a> * LLRP::CConnection::transact           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classLLRP_1_1CMessage.html">CMessage</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pSendMessage</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nMaxMS</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Transact a <a class="el" href="namespaceLLRP.html">LLRP</a> request and response to a connection. 
<p>
This is a combination of <a class="el" href="classLLRP_1_1CConnection.html#a7">sendMessage()</a> and <a class="el" href="classLLRP_1_1CConnection.html#a10">recvResponse()</a>. The MessageID is taken from the outgoing messages. It's best to not use MessageID 0.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pSendMessage</em>&nbsp;</td><td>Pointer to the <a class="el" href="namespaceLLRP.html">LLRP</a> message to send. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>nMaxMS</em>&nbsp;</td><td>-1 =&gt; block indefinitely 0 =&gt; just peek at input queue and socket queue, return immediately no matter what &gt;0 =&gt; ms to await complete frame</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>==NULL Something failed. Use <a class="el" href="classLLRP_1_1CConnection.html#a6">getTransactError()</a> for best guess at what went wrong. !=NULL Response message </dd></dl>

<p>
Definition at line <a class="el" href="ltkcpp__connection_8cpp-source.html#l00452">452</a> of file <a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a>.
<p>
References <a class="el" href="ltkcpp__error_8cpp-source.html#l00035">LLRP::CErrorDetails::clear()</a>, <a class="el" href="ltkcpp__base_8h-source.html#l00601">LLRP::EResultCode</a>, <a class="el" href="ltkcpp__base_8h-source.html#l01124">LLRP::CMessage::getMessageID()</a>, <a class="el" href="ltkcpp__base_8h-source.html#l00794">LLRP::CTypeDescriptor::m_pResponseType</a>, <a class="el" href="ltkcpp__base_8h-source.html#l00989">LLRP::CElement::m_pType</a>, <a class="el" href="namespaceLLRP.html#a333a261">LLRP::RC_MissingResponseType</a>, <a class="el" href="namespaceLLRP.html#a333a251">LLRP::RC_OK</a>, <a class="el" href="ltkcpp__connection_8cpp-source.html#l00772">recvResponse()</a>, <a class="el" href="ltkcpp__error_8cpp-source.html#l00067">LLRP::CErrorDetails::resultCodeAndWhatStr()</a>, and <a class="el" href="ltkcpp__connection_8cpp-source.html#l00545">sendMessage()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="ltkcpp__connection_8h-source.html">ltkcpp_connection.h</a><li><a class="el" href="ltkcpp__connection_8cpp-source.html">ltkcpp_connection.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Feb 24 09:16:30 2010 for LTKCPP-- LLRP Toolkit C Plus Plus Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
